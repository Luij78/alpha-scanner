"use strict";(()=>{var e={};e.id=607,e.ids=[607],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1282:e=>{e.exports=require("child_process")},4770:e=>{e.exports=require("crypto")},7702:e=>{e.exports=require("events")},2615:e=>{e.exports=require("http")},8791:e=>{e.exports=require("https")},3079:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>x,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h});var a={};r.r(a),r.d(a,{POST:()=>p});var n=r(9303),s=r(8716),o=r(670),c=r(7070),i=r(9777);let u={pro:{name:"AlphaScanner Pro",price:2900,interval:"month"},fund:{name:"AlphaScanner Fund",price:9900,interval:"month"}};async function p(e){try{let{plan:t,email:r}=await e.json();if(!t||!u[t])return c.NextResponse.json({error:"Invalid plan"},{status:400});let a=process.env.STRIPE_SECRET_KEY?new i.Z(process.env.STRIPE_SECRET_KEY,{apiVersion:"2024-12-18.acacia"}):null;if(!a)return c.NextResponse.json({error:"Payment coming soon — join the waitlist!"},{status:503});let n=u[t],s=process.env.NEXT_PUBLIC_APP_URL||"https://alpha-scanner-theta.vercel.app",o=await a.checkout.sessions.create({mode:"subscription",payment_method_types:["card"],customer_email:r||void 0,line_items:[{price_data:{currency:"usd",product_data:{name:n.name,description:`${n.name} — Real-time crypto unusual activity alerts`},unit_amount:n.price,recurring:{interval:n.interval}},quantity:1}],success_url:`${s}?checkout=success&plan=${t}`,cancel_url:`${s}?checkout=cancelled`,metadata:{plan:t}});return c.NextResponse.json({url:o.url})}catch(e){return console.error("Checkout error:",e),c.NextResponse.json({error:e.message||"Checkout failed"},{status:500})}}let l=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/checkout/route",pathname:"/api/checkout",filename:"route",bundlePath:"app/api/checkout/route"},resolvedPagePath:"/Users/luisgarcia/clawd/alpha-scanner/app/api/checkout/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:h,serverHooks:m}=l,v="/api/checkout/route";function x(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,972,777],()=>r(3079));module.exports=a})();